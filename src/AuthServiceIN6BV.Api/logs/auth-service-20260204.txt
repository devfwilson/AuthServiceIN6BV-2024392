[2026-02-04 16:08:32 INF] Checking database connection... {"SourceContext":"Program"}
[2026-02-04 16:08:36 ERR] An error occurred while initializing the database {"SourceContext":"Program"}
Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5435
 ---> System.Net.Sockets.SocketException (10061): No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.UnpooledDataSource.Get(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.EnsureCreatedAsync(CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in C:\2024392\AuthServiceIN6BV-2024392\src\AuthServiceIN6BV.Api\Program.cs:line 134
[2026-02-04 16:09:28 INF] Checking database connection... {"SourceContext":"Program"}
[2026-02-04 16:09:28 INF] Database ready. Running seed data... {"SourceContext":"Program"}
[2026-02-04 16:10:22 INF] Checking database connection... {"SourceContext":"Program"}
[2026-02-04 16:10:22 INF] Database ready. Running seed data... {"SourceContext":"Program"}
[2026-02-04 16:12:16 INF] Checking database connection... {"SourceContext":"Program"}
[2026-02-04 16:12:17 INF] Database ready. Running seed data... {"SourceContext":"Program"}
[2026-02-04 16:19:25 INF] Checking database connection... {"SourceContext":"Program"}
[2026-02-04 16:19:25 INF] Database ready. Running seed data... {"SourceContext":"Program"}
[2026-02-04 16:22:11 INF] Checking database connection... {"SourceContext":"Program"}
[2026-02-04 16:22:11 INF] Database ready. Running seed data... {"SourceContext":"Program"}
[2026-02-04 16:22:11 INF] Database initialization completed successfully {"SourceContext":"Program"}
[2026-02-04 16:22:11 INF] AuthService API is running at http://localhost:5102. Health endpoint: http://localhost:5102/health {"SourceContext":"Program"}
[2026-02-04 16:33:21 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJ47JF7HU1V:00000001","RequestPath":"/api/v1/Health","ConnectionId":"0HNJ47JF7HU1V"}
[2026-02-04 16:33:21 INF] HTTP GET /api/v1/Health responded 200 in 48.5559 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ47JF7HU1V:00000001","ConnectionId":"0HNJ47JF7HU1V"}
[2026-02-04 16:33:41 INF] HTTP GET /api/v1/Auth/profile responded 401 in 3.7683 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ47JF7HU1V:00000002","ConnectionId":"0HNJ47JF7HU1V"}
[2026-02-04 16:33:51 INF] HTTP GET /health responded 200 in 28.2589 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ47JF7HU1V:00000003","ConnectionId":"0HNJ47JF7HU1V"}
[2026-02-04 16:34:31 INF] HTTP GET /api/v1/Users/1/role responded 405 in 0.1185 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ47JF7HU1V:00000004","ConnectionId":"0HNJ47JF7HU1V"}
[2026-02-04 16:34:35 INF] HTTP GET /api/v1/Users/1/roles responded 401 in 0.7949 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ47JF7HU1V:00000005","ConnectionId":"0HNJ47JF7HU1V"}
[2026-02-04 16:34:42 INF] HTTP GET /api/v1/Users/1/role responded 405 in 0.1015 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ47JF7HU1V:00000006","ConnectionId":"0HNJ47JF7HU1V"}
[2026-02-04 16:36:06 INF] HTTP GET /api/v1/Users/by-role/USER_ROLE responded 401 in 9.0350 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ47JF7HU21:00000001","ConnectionId":"0HNJ47JF7HU21"}
